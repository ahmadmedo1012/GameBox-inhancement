(function(){"use strict";const $=(sel,ctx=document)=>ctx.querySelector(sel);const $$=(sel,ctx=document)=>Array.prototype.slice.call(ctx.querySelectorAll(sel));try{document.body.classList.add("ui-enhanced");}catch(e){}const THEME_KEY="ui-theme";function applyTheme(mode){try{const m=(mode==="dark"||mode==="light")?mode:"dark";document.documentElement.setAttribute("data-theme",m);localStorage.setItem(THEME_KEY,m);}catch(e){}}function getTheme(){try{return localStorage.getItem(THEME_KEY)|| "dark";}catch(e){return "dark";}}applyTheme(getTheme());try{if(!$(".ui-theme-fab")){const fab=document.createElement("button");fab.className="ui-theme-fab";fab.type="button";fab.setAttribute("aria-label","Toggle Theme");fab.innerHTML='<svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M21.64 13A9 9 0 1111 2.36 7 7 0 0021.64 13z"/></svg>';fab.addEventListener("click",function(){const next=(getTheme()==="dark")?"light":"dark";applyTheme(next);},{passive:true});document.body.appendChild(fab);}}catch(e){console.warn(e);}try{const header=$("header")|| $(".header")|| $("#header");if(header){header.classList.add("ui-header");const onScroll=()=>{header.classList.toggle("is-scrolled",window.scrollY>6);};window.addEventListener("scroll",onScroll,{passive:true});onScroll();}}catch(e){}try{$$("[data-ui-toggle]").forEach(btn=>{btn.addEventListener("click",function(){const tgt=document.querySelector(this.getAttribute("data-ui-toggle"));if(!tgt)return;const isOpen=tgt.getAttribute("aria-expanded")==="true";tgt.setAttribute("aria-expanded",String(!isOpen));tgt.classList.toggle("ui-open",!isOpen);},{passive:true});});}catch(e){}function enhanceTables(){try{$$(".ui-table,table.ui-table,table[data-ui='table']").forEach(tbl=>{const heads=$$("thead th",tbl).map(th=>(th.textContent||"").trim());if(!heads.length)return;$$("tbody tr",tbl).forEach(tr=>{$$("td",tr).forEach((td,idx)=>{if(!td.hasAttribute("data-label")&& heads[idx])td.setAttribute("data-label",heads[idx]);});});});}catch(e){}}enhanceTables();window.addEventListener("resize",function(){enhanceTables();},{passive:true});try{$$("img").forEach(img=>{if(!img.hasAttribute("loading"))img.setAttribute("loading","lazy");img.setAttribute("decoding","async");});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');if(!h)return;var last=window.scrollY||0,ticking=false,hidden=false,delta=8;function evalDir(){var y=window.scrollY||0;if(Math.abs(y-last)<=delta){last=y;return;}if(y>last&&y>64){if(!hidden){h.classList.add('ui-hide');hidden=true;}}else{if(hidden){h.classList.remove('ui-hide');hidden=false;}}last=y;}window.addEventListener('scroll',function(){if(!ticking){window.requestAnimationFrame(function(){evalDir();ticking=false;});ticking=true;}},{passive:true});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');function setHH(){try{var hh=h?Math.max(0,Math.round(h.getBoundingClientRect().height))||64:64;document.documentElement.style.setProperty('--ui-header-h',hh+'px');}catch(e){}}setHH();window.addEventListener('resize',function(){setHH();},{passive:true});var togglers=[].slice.call(document.querySelectorAll('[data-ui-toggle]'));function looksLikeMenu(el){if(!el)return false;var s=(el.className||'')+' '+(el.id||'');s=s.toLowerCase();return el.tagName.toLowerCase()==='nav'||el.getAttribute('role')==='navigation'||/menu|sidebar|drawer|offcanvas/.test(s);}togglers.forEach(function(btn){btn.addEventListener('click',function(){try{var tgt=document.querySelector(btn.getAttribute('data-ui-toggle'));if(!tgt)return;var opening=tgt.classList.contains('ui-open');opening=!opening;if(looksLikeMenu(tgt)){tgt.classList.add('ui-drawer');setHH();if(opening){document.body.classList.add('ui-menu-open');if(h)h.classList.add('ui-hide');}else{document.body.classList.remove('ui-menu-open');if(h)h.classList.remove('ui-hide');}}}catch(e){}},{passive:true});});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');if(h){h.setAttribute('data-hide-driver','smooth');}var last=window.scrollY||0;var delta=10;var topHold=96;function onScrollSmooth(){try{if(!h)return;var y=window.scrollY||0;var diff=y-last;var down=diff>0;if(y<=topHold){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}else{if(down&&diff>delta){h.classList.add('ui-allow');}else if(!down&&Math.abs(diff)>delta){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}}last=y;}catch(e){}}window.addEventListener('scroll',function(){window.requestAnimationFrame(onScrollSmooth)},{passive:true});}catch(e){}})();(function(){try{var path=(location.pathname||'').toLowerCase();var isHome=(path==='/'||/index\.(php|html)$/.test(path));if(!isHome)return;var scr=document.createElement('div');scr.className='ui-loader-screen';scr.innerHTML='<div class="ui-loader-brand"><div class="ui-loader-dot"></div><div class="ui-loader-name">جارِ التحميل…</div></div>';document.addEventListener('DOMContentLoaded',function(){try{document.body.appendChild(scr);}catch(e){}});window.addEventListener('load',function(){try{scr.classList.add('ui-loader-hide');setTimeout(function(){if(scr&&scr.parentNode){scr.parentNode.removeChild(scr);}},280);}catch(e){}});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');var body=document.body;function keepHeaderIfMenu(){try{if(!h)return; if(body.classList.contains('ui-menu-open')){h.classList.remove('ui-hide');h.classList.remove('ui-allow');}}catch(e){}}document.addEventListener('click',function(ev){try{if(ev.target.closest('[data-ui-toggle]')){setTimeout(keepHeaderIfMenu,0);}}catch(e){}},true);window.addEventListener('scroll',function(){try{if(body.classList.contains('ui-menu-open')){if(h){h.classList.remove('ui-hide');h.classList.remove('ui-allow');}}}catch(e){}},{passive:true});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');if(!h)return;var last=window.scrollY||0, delta=22, topHold=140, rafing=false;function smoothCtrl(){try{var y=window.scrollY||0;var diff=y-last;var down=diff>0;if(y<=topHold){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}else{if(down&&diff>delta){h.classList.add('ui-allow');}else if(!down&&Math.abs(diff)>delta){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}}last=y;}catch(e){}}window.addEventListener('scroll',function(){if(!rafing){window.requestAnimationFrame(function(){smoothCtrl();rafing=false;});rafing=true;}},{passive:true});}catch(e){}})();(function(){try{var path=(location.pathname||'').toLowerCase();var isHome=(path==='/'||/index\.(php|html)$/.test(path));if(!isHome)return;function hideLoaderSoon(){try{var scr=document.querySelector('.ui-loader-screen');if(!scr)return;scr.classList.add('ui-loader-hide');setTimeout(function(){if(scr&&scr.parentNode){scr.parentNode.removeChild(scr);}},160);}catch(e){}}if(document.readyState==='interactive'||document.readyState==='complete'){hideLoaderSoon();}else{document.addEventListener('DOMContentLoaded',hideLoaderSoon);}window.addEventListener('load',hideLoaderSoon,{once:true});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');if(!h)return;var last=window.scrollY||0, delta=26, topHold=120, rafing=false;function ctrl(){try{var y=window.scrollY||0;var diff=y-last;var down=diff>0;if(y<=topHold){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}else{if(down&&diff>delta){h.classList.add('ui-allow');h.classList.add('ui-hide');}else if(!down&&Math.abs(diff)>delta){h.classList.remove('ui-allow');h.classList.remove('ui-hide');}}last=y;}catch(e){}}window.addEventListener('scroll',function(){if(!rafing){window.requestAnimationFrame(function(){ctrl();rafing=false;});rafing=true;}},{passive:true});}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');var body=document.body;function updateForMenu(tgt){try{var opened=!!(tgt&&tgt.classList&&tgt.classList.contains('ui-open'));if(opened){body.classList.add('ui-menu-open');if(h){h.classList.add('ui-hide');}}else{body.classList.remove('ui-menu-open');if(h){h.classList.remove('ui-hide');}}}catch(e){}}document.addEventListener('click',function(ev){try{var btn=ev.target.closest('[data-ui-toggle]');if(!btn)return;setTimeout(function(){try{var tgt=document.querySelector(btn.getAttribute('data-ui-toggle'));updateForMenu(tgt);}catch(e){}},0);}catch(e){}},true);window.addEventListener('scroll',function(){try{if(body.classList.contains('ui-menu-open')){if(h)h.classList.add('ui-hide');}}catch(e){}},{passive:true});}catch(e){}})();(function(){try{var path=(location.pathname||'').toLowerCase();var isHome=(path==='/'||/index\.(php|html)$/.test(path));if(!isHome)return;function ensureLoader(){try{var scr=document.querySelector('.ui-loader-screen');if(!scr){scr=document.createElement('div');scr.className='ui-loader-screen';scr.innerHTML='<div class="ui-loader-brand"><div class="ui-loader-dot"></div><div class="ui-loader-name">جارِ التحميل…</div></div>';document.body.appendChild(scr);}return scr;}catch(e){return null;}}function hideAfter(ms){try{var scr=ensureLoader();if(!scr)return;setTimeout(function(){try{scr.classList.add('ui-loader-hide');setTimeout(function(){if(scr&&scr.parentNode){scr.parentNode.removeChild(scr);}},260);}catch(e){}},ms);}catch(e){}}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',function(){hideAfter(2000);});}else{hideAfter(2000);}}catch(e){}})();(function(){try{var h=document.querySelector('header')||document.querySelector('.header')||document.querySelector('#header');if(!h)return;function setHH(){try{var hh=h.getBoundingClientRect().height||64;document.documentElement.style.setProperty('--ui-header-h',Math.round(hh)+'px');}catch(e){}}setHH(); window.addEventListener('resize', setHH, {passive:true});h.classList.remove('ui-hide'); h.style.transform='';window.addEventListener('scroll', function(){try{h.classList.remove('ui-hide');}catch(e){}}, {passive:true});}catch(e){}})();